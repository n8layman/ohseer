% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ohseer_ocr.R
\name{ohseer_ocr}
\alias{ohseer_ocr}
\title{Unified OCR Interface for Multiple Providers}
\usage{
ohseer_ocr(
  file_path,
  provider = c("tensorlake", "mistral", "claude"),
  pages = NULL,
  timeout = 60,
  extract_pages = TRUE,
  api_key = NULL,
  ...
)
}
\arguments{
\item{file_path}{Character string. Path to the PDF file to process.}

\item{provider}{Character string. OCR provider to use. One of:
\describe{
\item{"tensorlake"}{Tensorlake OCR API (default) - Returns structured fragments}
\item{"mistral"}{Mistral OCR 3 - Returns native format with markdown}
\item{"claude"}{Claude Opus/Sonnet with structured outputs}
}}

\item{pages}{Integer vector. Specific page numbers to process. If NULL (default),
processes all pages. Page numbers are 1-based.}

\item{timeout}{Numeric. Maximum wait time in seconds for OCR processing.
Default is 60 seconds. Not used for Claude provider.}

\item{extract_pages}{Logical. If TRUE (default), automatically extracts and
returns page data using provider-specific extraction functions. If FALSE,
returns raw API response.}

\item{api_key}{Character string. API key for the provider. If NULL (default),
reads from environment variables:
\itemize{
\item Tensorlake: \code{TENSORLAKE_API_KEY}
\item Mistral: \code{MISTRAL_API_KEY}
\item Claude: \code{ANTHROPIC_API_KEY}
}}

\item{...}{Additional provider-specific arguments passed to the underlying
OCR function:
\describe{
\item{Tensorlake}{\code{model}, \code{use_cache}, etc.}
\item{Mistral}{\code{extract_header}, \code{extract_footer}, \code{table_format}, etc.}
\item{Claude}{\code{model}, \code{max_tokens}, \code{dpi}, \code{schema}, etc.}
}}
}
\value{
If \code{extract_pages = TRUE} (default), returns a list with:
\describe{
\item{provider}{Character string naming the provider used}
\item{pages}{List of extracted page data (structure varies by provider)}
\item{raw}{Raw API response (for advanced use)}
}

If \code{extract_pages = FALSE}, returns the raw provider API response.
}
\description{
A unified wrapper function that provides a consistent interface across different
OCR providers (Tensorlake, Mistral, Claude). This function normalizes parameter
names and return structures, making it easier to switch between providers or
implement provider fallback logic.
}
\section{Provider-Specific Output Formats}{


Each provider returns pages in a different native format:

\strong{Tensorlake} - Structured fragments:
\itemize{
\item \code{page_number}: Integer (1-based)
\item \code{page_fragments}: List of content fragments with type, content, reading_order
}

\strong{Mistral} - Native markdown format:
\itemize{
\item \code{index}: Integer (0-based)
\item \code{markdown}: Full page content
\item \code{tables}: Array of table objects
\item \code{header}, \code{footer}: Separate header/footer fields
}

\strong{Claude} - Structured output (Tensorlake-compatible by default):
\itemize{
\item \code{page_number}: Integer (1-based)
\item \code{page_fragments}: List of content fragments
\item Custom schema can be provided via \code{schema} argument
}
}

\section{Provider Fallback Example}{


\preformatted{
try_providers_with_fallback <- function(file_path, providers = c("tensorlake", "mistral", "claude")) {
  for (provider in providers) {
    result <- tryCatch({
      ohseer_ocr(file_path, provider = provider)
    }, error = function(e) NULL)

    if (!is.null(result)) {
      message("Successfully processed with ", provider)
      return(result)
    }
  }
  stop("All OCR providers failed")
}
}
}

\examples{
\dontrun{
# Basic usage with default provider (Tensorlake)
result <- ohseer_ocr("document.pdf")

# Use Mistral OCR with header/footer extraction
result <- ohseer_ocr(
  "document.pdf",
  provider = "mistral",
  extract_header = TRUE,
  extract_footer = TRUE
)

# Use Claude with custom model and page selection
result <- ohseer_ocr(
  "document.pdf",
  provider = "claude",
  pages = c(1, 2),
  model = "claude-sonnet-4-5"
)

# Get raw response without page extraction
raw <- ohseer_ocr("document.pdf", extract_pages = FALSE)

# Access extracted pages
pages <- result$pages
first_page <- pages[[1]]

# Provider fallback pattern
result <- tryCatch(
  ohseer_ocr("document.pdf", provider = "tensorlake"),
  error = function(e) ohseer_ocr("document.pdf", provider = "mistral")
)
}

}
\seealso{
Provider-specific functions:
\itemize{
\item \code{\link{tensorlake_ocr}}, \code{\link{tensorlake_extract_pages}}
\item \code{\link{mistral_ocr}}, \code{\link{mistral_extract_pages}}
\item \code{\link{claude_ocr_process_file}}, \code{\link{claude_extract_pages}}
}
}
\author{
Nathan C. Layman
}
