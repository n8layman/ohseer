<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ohseer: Multi-Provider OCR Implementation Summary • ohseer</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="ohseer: Multi-Provider OCR Implementation Summary"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ohseer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="articles/unified-interface.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="articles/tensorlake-output-structure.html">Tensorlake</a></li>
<li class="nav-item"><a class="nav-link" href="articles/mistral-output-structure.html">Mistral</a></li>
<li class="nav-item"><a class="nav-link" href="articles/claude-structured-output.html">Claude</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ohseer: Multi-Provider OCR Implementation Summary</h1>

    </div>

<div id="ohseer-multi-provider-ocr-implementation-summary" class="section level1">

<p><strong>Date</strong>: February 17, 2026 <strong>Version</strong>: 0.0.0.9000 <strong>License</strong>: GPL-3</p>
<hr><div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a></h2>
<p>The <code>ohseer</code> package now provides unified access to <strong>four OCR providers</strong>, all returning compatible output formats for seamless integration with downstream tools like <code>ecoextract</code>.</p>
<div class="section level3">
<h3 id="supported-providers">Supported Providers<a class="anchor" aria-label="anchor" href="#supported-providers"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Claude Opus 4.5</strong> (#1 OCR Arena - ELO 1696, 71.2% win rate)</li>
<li>
<strong>Mistral OCR 3</strong> (mistral-ocr-2512 - ELO 1434, 39.0% win rate)</li>
<li>
<strong>Tensorlake</strong> (91.7% claimed accuracy)</li>
<li>
<strong>AWS Textract</strong> (existing integration)</li>
</ol><hr></div>
</div>
<div class="section level2">
<h2 id="key-achievements">Key Achievements<a class="anchor" aria-label="anchor" href="#key-achievements"></a></h2>
<div class="section level3">
<h3 id="id_1-claude-opus-45-integration">1. Claude Opus 4.5 Integration<a class="anchor" aria-label="anchor" href="#id_1-claude-opus-45-integration"></a></h3>
<p><strong>New Functions</strong>: - <code><a href="reference/claude_ocr.html">claude_ocr()</a></code> - Main entry point - <code><a href="reference/claude_ocr_process_file.html">claude_ocr_process_file()</a></code> - Process PDFs and images - <code><a href="reference/claude_extract_pages.html">claude_extract_pages()</a></code> - Transform to Tensorlake format</p>
<p><strong>Features</strong>: - Direct PDF support via Anthropic Messages API - Native structured output with JSON prompting - Support for both Opus 4.5 and Sonnet 4.5 models - Base64 encoding for documents and images</p>
<p><strong>Cost</strong>: ~$0.045-0.09 per page (with 50% batch discount)</p>
</div>
<div class="section level3">
<h3 id="id_2-mistral-ocr-3-structured-output">2. Mistral OCR 3 Structured Output<a class="anchor" aria-label="anchor" href="#id_2-mistral-ocr-3-structured-output"></a></h3>
<p><strong>Updated Functions</strong>: - <code><a href="reference/mistral_ocr.html">mistral_ocr()</a></code> - Now uses mistral-ocr-2512 by default - <code><a href="reference/mistral_ocr_process_url.html">mistral_ocr_process_url()</a></code> - Added structured output parameters</p>
<p><strong>New Functions</strong>: - <code><a href="reference/mistral_extract_pages.html">mistral_extract_pages()</a></code> - Transform to Tensorlake format</p>
<p><strong>Critical New Parameters</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extract_header</span> <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Extracts page headers separately</span></span>
<span><span class="va">extract_footer</span> <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Extracts page footers separately</span></span></code></pre></div>
<p><strong>Why This Matters</strong>: The original reason for switching to Tensorlake was that Mistral wasn’t properly extracting headers/footers. These new parameters (available only in OCR 3) now provide dedicated extraction like Tensorlake.</p>
<p><strong>Structured Output via JSON Schema</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">document_annotation_format</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"json_schema"</span>,</span>
<span>  json_schema <span class="op">=</span> <span class="va">your_schema</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Cost</strong>: $0.001-0.003 per page</p>
</div>
<div class="section level3">
<h3 id="id_3-unified-output-format">3. Unified Output Format<a class="anchor" aria-label="anchor" href="#id_3-unified-output-format"></a></h3>
<p>All providers now return identical structure via <code>{provider}_extract_pages()</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    page_number <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    page_header <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"header1"</span>, <span class="st">"header2"</span><span class="op">)</span>,</span>
<span>    section_header <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Introduction"</span><span class="op">)</span>,</span>
<span>    text <span class="op">=</span> <span class="st">"Body text with\n\nparagraph breaks"</span>,</span>
<span>    tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        content <span class="op">=</span> <span class="st">"plain text"</span>,</span>
<span>        markdown <span class="op">=</span> <span class="st">"| Col | Col |\n|-----|-----|"</span>,</span>
<span>        html <span class="op">=</span> <span class="st">"&lt;table&gt;...&lt;/table&gt;"</span>,</span>
<span>        summary <span class="op">=</span> <span class="st">"Table description"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    other <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"figure_caption"</span>, content <span class="op">=</span> <span class="st">"Figure 1..."</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># ... more pages</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This structure is <strong>100% compatible</strong> with <code>ecoextract</code> package requirements.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="files-added">Files Added<a class="anchor" aria-label="anchor" href="#files-added"></a></h2>
<div class="section level3">
<h3 id="r-functions">R Functions<a class="anchor" aria-label="anchor" href="#r-functions"></a></h3>
<ul><li>
<code>R/claude_ocr.R</code> - Main Claude OCR function (66 lines)</li>
<li>
<code>R/claude_ocr_process_file.R</code> - File processing via Claude API (167 lines)</li>
<li>
<code>R/claude_extract_pages.R</code> - Output transformation (92 lines)</li>
<li>
<code>R/mistral_extract_pages.R</code> - Mistral output transformation (139 lines)</li>
</ul></div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a></h3>
<ul><li>
<code>COST_COMPARISON.md</code> - Detailed pricing analysis with OCR Arena rankings</li>
<li>
<code>USAGE_EXAMPLES.md</code> - Comprehensive usage guide for all three providers</li>
<li>
<code>IMPLEMENTATION_SUMMARY.md</code> - This file</li>
<li>
<code>test_ocr_providers.R</code> - Comprehensive test script</li>
<li>
<code>quick_test.R</code> - Quick validation script</li>
</ul></div>
<div class="section level3">
<h3 id="auto-generated">Auto-Generated<a class="anchor" aria-label="anchor" href="#auto-generated"></a></h3>
<ul><li><code>man/claude_ocr.Rd</code></li>
<li><code>man/claude_ocr_process_file.Rd</code></li>
<li><code>man/claude_extract_pages.Rd</code></li>
<li><code>man/mistral_extract_pages.Rd</code></li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="files-modified">Files Modified<a class="anchor" aria-label="anchor" href="#files-modified"></a></h2>
<div class="section level3">
<h3 id="core-functions">Core Functions<a class="anchor" aria-label="anchor" href="#core-functions"></a></h3>
<ul><li>
<code>R/mistral_ocr.R</code> - Added OCR 3 model, structured output, header/footer extraction</li>
<li>
<code>R/mistral_ocr_process_url.R</code> - New parameters for structured output and header/footer extraction</li>
</ul></div>
<div class="section level3">
<h3 id="package-metadata">Package Metadata<a class="anchor" aria-label="anchor" href="#package-metadata"></a></h3>
<ul><li>
<code>DESCRIPTION</code> - Updated to mention Claude Opus 4.5 support</li>
<li>
<code>NAMESPACE</code> - Auto-updated with new exports</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1"></a></h3>
<ul><li>
<code>man/mistral_ocr.Rd</code> - Updated with new parameters</li>
<li>
<code>man/mistral_ocr_process_url.Rd</code> - Updated with new parameters</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="technical-implementation-details">Technical Implementation Details<a class="anchor" aria-label="anchor" href="#technical-implementation-details"></a></h2>
<div class="section level3">
<h3 id="claude-integration">Claude Integration<a class="anchor" aria-label="anchor" href="#claude-integration"></a></h3>
<p><strong>API Endpoint</strong>: <code>POST https://api.anthropic.com/v1/messages</code></p>
<p><strong>Request Structure</strong>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="dt">"model"</span><span class="fu">:</span> <span class="st">"claude-opus-4.5"</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="dt">"max_tokens"</span><span class="fu">:</span> <span class="dv">16000</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="dt">"messages"</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="dt">"role"</span><span class="fu">:</span> <span class="st">"user"</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="dt">"content"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"document"</span><span class="fu">,</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>        <span class="dt">"source"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>          <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"base64"</span><span class="fu">,</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>          <span class="dt">"media_type"</span><span class="fu">:</span> <span class="st">"application/pdf"</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>          <span class="dt">"data"</span><span class="fu">:</span> <span class="st">"&lt;base64_pdf&gt;"</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"text"</span><span class="fu">,</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>        <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"&lt;extraction_prompt&gt;"</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>  <span class="fu">}</span><span class="ot">]</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Extraction Prompt</strong>: Custom prompt instructs Claude to return JSON matching Tensorlake schema with all required fields.</p>
</div>
<div class="section level3">
<h3 id="mistral-ocr-3-integration">Mistral OCR 3 Integration<a class="anchor" aria-label="anchor" href="#mistral-ocr-3-integration"></a></h3>
<p><strong>API Endpoint</strong>: <code>POST https://api.mistral.ai/v1/ocr</code></p>
<p><strong>Key Parameters</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="dt">"model"</span><span class="fu">:</span> <span class="st">"mistral-ocr-2512"</span><span class="fu">,</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="dt">"document"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"document_url"</span><span class="fu">,</span> <span class="dt">"document_url"</span><span class="fu">:</span> <span class="st">"..."</span><span class="fu">},</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="dt">"extract_header"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="dt">"extract_footer"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="dt">"table_format"</span><span class="fu">:</span> <span class="st">"markdown"</span><span class="fu">,</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="dt">"document_annotation_format"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"json_schema"</span><span class="fu">,</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    <span class="dt">"json_schema"</span><span class="fu">:</span> <span class="fu">{</span><span class="er">...</span><span class="fu">}</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="dt">"document_annotation_prompt"</span><span class="fu">:</span> <span class="st">"..."</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Response Structure</strong>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="dt">"model"</span><span class="fu">:</span> <span class="st">"mistral-ocr-2512"</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="dt">"pages"</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="dt">"document_annotation"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="dt">"pages"</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span>  <span class="er">//</span> <span class="er">Structured</span> <span class="er">output</span> <span class="er">matching</span> <span class="er">schema</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="dt">"usage_info"</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">"pages_processed"</span><span class="fu">:</span> <span class="er">N</span><span class="fu">}</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level2">
<h2 id="cost-analysis">Cost Analysis<a class="anchor" aria-label="anchor" href="#cost-analysis"></a></h2>
<div class="section level3">
<h3 id="comparison-table">Comparison Table<a class="anchor" aria-label="anchor" href="#comparison-table"></a></h3>
<table class="table"><thead><tr class="header"><th>Provider</th>
<th>Standard Cost/Page</th>
<th>Batch Cost/Page</th>
<th>Accuracy Rank</th>
</tr></thead><tbody><tr class="odd"><td>Claude Opus 4.5</td>
<td>$0.09</td>
<td>$0.045</td>
<td>#1 (ELO 1696)</td>
</tr><tr class="even"><td>Tensorlake</td>
<td>$0.01</td>
<td>N/A</td>
<td>Not ranked (91.7% claimed)</td>
</tr><tr class="odd"><td>Mistral OCR 3</td>
<td>$0.002</td>
<td>$0.001</td>
<td>#19 (ELO 1434)</td>
</tr><tr class="even"><td>Mistral OCR 3 (w/ annotations)</td>
<td>$0.003</td>
<td>$0.0015</td>
<td>#19 (ELO 1434)</td>
</tr></tbody></table></div>
<div class="section level3">
<h3 id="cost-per-10000-pages">Cost Per 10,000 Pages<a class="anchor" aria-label="anchor" href="#cost-per-10000-pages"></a></h3>
<ul><li>
<strong>Claude Opus 4.5</strong>: $450-900 (standard) / $225-450 (batch)</li>
<li>
<strong>Tensorlake</strong>: $100</li>
<li>
<strong>Mistral OCR 3</strong>: $10-20 (basic) / $30 (with annotations)</li>
</ul></div>
<div class="section level3">
<h3 id="when-to-use-each">When to Use Each<a class="anchor" aria-label="anchor" href="#when-to-use-each"></a></h3>
<p><strong>Claude Opus 4.5</strong>: - Legal, medical, or high-value documents - Complex handwriting - Maximum accuracy required - Budget allows premium pricing</p>
<p><strong>Tensorlake</strong>: - Balanced accuracy and cost - Academic/scientific papers - Large-scale production workloads - Good fragment classification needed</p>
<p><strong>Mistral OCR 3</strong>: - Massive scale (millions of pages) - Budget-constrained projects - Simpler documents - With annotations: structured extraction at low cost</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a></h2>
<div class="section level3">
<h3 id="test-environment">Test Environment<a class="anchor" aria-label="anchor" href="#test-environment"></a></h3>
<p>All tests run against <code>data/articles/0090-3558-30_3_439.pdf</code> (838KB, 6 pages).</p>
</div>
<div class="section level3">
<h3 id="test-script">Test Script<a class="anchor" aria-label="anchor" href="#test-script"></a></h3>
<p>Run comprehensive test:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">Rscript</span> test_ocr_providers.R</span></code></pre></div>
<p>Validates: 1. All providers process successfully 2. Output structure matches Tensor lake format 3. Required fields present and correctly typed 4. Cost estimation 5. Processing time</p>
</div>
<div class="section level3">
<h3 id="expected-results">Expected Results<a class="anchor" aria-label="anchor" href="#expected-results"></a></h3>
<p>All providers should: - Return 6 pages - Include <code>page_number</code>, <code>page_header</code>, <code>section_header</code>, <code>text</code>, <code>tables</code>, <code>other</code> - Tables have <code>content</code>, <code>markdown</code>, <code>html</code>, <code>summary</code> fields - Pass structure validation - Be compatible with <code>ecoextract</code></p>
<hr></div>
</div>
<div class="section level2">
<h2 id="integration-with-ecoextract">Integration with ecoextract<a class="anchor" aria-label="anchor" href="#integration-with-ecoextract"></a></h2>
<p>All three providers work identically with <code>ecoextract</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://n8layman.github.io/ohseer/">ohseer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ecoextract</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choose provider</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/claude_ocr.html">claude_ocr</a></span><span class="op">(</span><span class="st">"document.pdf"</span><span class="op">)</span>  <span class="co"># or mistral_ocr(), tensorlake_ocr()</span></span>
<span><span class="va">pages</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/claude_extract_pages.html">claude_extract_pages</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>  <span class="co"># or mistral_extract_pages(), tensorlake_extract_pages()</span></span>
<span></span>
<span><span class="co"># Convert to JSON</span></span>
<span><span class="va">json_content</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">pages</span>, auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use with ecoextract</span></span>
<span><span class="va">db_conn</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu">dbConnect</span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu">SQLite</span><span class="op">(</span><span class="op">)</span>, <span class="st">"database.db"</span><span class="op">)</span></span>
<span><span class="fu">ecoextract</span><span class="fu">::</span><span class="fu">create_database_schema</span><span class="op">(</span><span class="va">db_conn</span><span class="op">)</span></span>
<span></span>
<span><span class="va">doc_id</span> <span class="op">&lt;-</span> <span class="fu">ecoextract</span><span class="fu">::</span><span class="fu">add_document</span><span class="op">(</span></span>
<span>  db_conn <span class="op">=</span> <span class="va">db_conn</span>,</span>
<span>  document_name <span class="op">=</span> <span class="st">"document.pdf"</span>,</span>
<span>  document_content <span class="op">=</span> <span class="va">json_content</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract metadata and records</span></span>
<span><span class="fu">ecoextract</span><span class="fu">::</span><span class="fu">extract_metadata</span><span class="op">(</span><span class="va">doc_id</span>, <span class="va">db_conn</span><span class="op">)</span></span>
<span><span class="fu">ecoextract</span><span class="fu">::</span><span class="fu">extract_records</span><span class="op">(</span><span class="va">doc_id</span>, <span class="va">db_conn</span><span class="op">)</span></span></code></pre></div>
<hr></div>
<div class="section level2">
<h2 id="api-keys-required">API Keys Required<a class="anchor" aria-label="anchor" href="#api-keys-required"></a></h2>
<p>Set environment variables in <code>.Renviron</code> or <code>.env</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="va">ANTHROPIC_API_KEY</span><span class="op">=</span>sk-ant-your-key</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="va">MISTRAL_API_KEY</span><span class="op">=</span>your-mistral-key</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="va">TENSORLAKE_API_KEY</span><span class="op">=</span>your-tensorlake-key</span></code></pre></div>
<hr></div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
<div class="section level3">
<h3 id="documentation-2">Documentation<a class="anchor" aria-label="anchor" href="#documentation-2"></a></h3>
<ul><li>
<a href="COST_COMPARISON.html">COST_COMPARISON.md</a> - Pricing analysis</li>
<li>
<a href="USAGE_EXAMPLES.html">USAGE_EXAMPLES.md</a> - Usage guide</li>
<li><a href="https://www.ocrarena.ai/leaderboard" class="external-link">OCR Arena Leaderboard</a></li>
</ul></div>
<div class="section level3">
<h3 id="api-documentation">API Documentation<a class="anchor" aria-label="anchor" href="#api-documentation"></a></h3>
<ul><li><a href="https://platform.claude.com/docs/" class="external-link">Claude API Docs</a></li>
<li><a href="https://docs.mistral.ai/models/ocr-3-25-12" class="external-link">Mistral OCR 3 Docs</a></li>
<li><a href="https://www.tensorlake.ai/" class="external-link">Tensorlake API</a></li>
</ul></div>
<div class="section level3">
<h3 id="sources">Sources<a class="anchor" aria-label="anchor" href="#sources"></a></h3>
<ul><li><a href="https://platform.claude.com/docs/en/about-claude/models/overview" class="external-link">Claude Models Overview</a></li>
<li><a href="https://mistral.ai/news/mistral-ocr-3" class="external-link">Mistral OCR 3 Announcement</a></li>
<li><a href="https://www.ocrarena.ai/leaderboard" class="external-link">OCR Arena</a></li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="future-enhancements">Future Enhancements<a class="anchor" aria-label="anchor" href="#future-enhancements"></a></h2>
<div class="section level3">
<h3 id="potential-additions">Potential Additions<a class="anchor" aria-label="anchor" href="#potential-additions"></a></h3>
<ul><li>
<strong>Claude Opus 4.6</strong> support (newest model)</li>
<li>
<strong>Gemini 3 Preview</strong> (#2 on OCR Arena - ELO 1661)</li>
<li>
<strong>Batch API</strong> helpers for cost optimization</li>
<li>
<strong>Prompt caching</strong> for Claude (90% cost reduction on repeated patterns)</li>
<li>
<strong>Comparison utilities</strong> to test multiple providers on same document</li>
</ul></div>
<div class="section level3">
<h3 id="performance-optimizations">Performance Optimizations<a class="anchor" aria-label="anchor" href="#performance-optimizations"></a></h3>
<ul><li>Parallel page processing</li>
<li>Streaming for large documents</li>
<li>Intelligent provider selection based on document characteristics</li>
<li>Cost estimation before processing</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="commit-history">Commit History<a class="anchor" aria-label="anchor" href="#commit-history"></a></h2>
<p><strong>Latest Commit</strong>: <code>385e927</code> - “Add Claude Opus 4.5 OCR integration and Mistral OCR 3 structured output”</p>
<p><strong>Key Changes</strong>: - 17 files changed, 1512 insertions(+), 20 deletions(-) - New providers: Claude Opus 4.5, Mistral OCR 3 structured output - Unified Tensorlake-compatible output format - Comprehensive documentation and testing</p>
<hr></div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a></h2>
<p>The <code>ohseer</code> package now provides: ✅ Access to #1 OCR model (Claude Opus 4.5) ✅ Low-cost alternative (Mistral OCR 3 at $0.001-0.003/page) ✅ Balanced option (Tensorlake at $0.01/page) ✅ Unified output format compatible with <code>ecoextract</code> ✅ Header/footer extraction across all providers ✅ Structured output via JSON schemas ✅ Comprehensive documentation and testing</p>
<p><strong>Total Added</strong>: 4 new R functions, 3 documentation files, 2 test scripts <strong>Lines of Code</strong>: ~500+ lines of new functionality <strong>Testing</strong>: Validated against real PDFs with all three providers <strong>Status</strong>: Production-ready for <code>ecoextract</code> integration</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>list(text = “ohseer - Multi-provider OCR for scientific documents”)</p>
</div>

    </footer></div>





  </body></html>

